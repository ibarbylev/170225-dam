# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ MySQL

–ò–Ω–¥–µ–∫—Å ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ

–ò–Ω–¥–µ–∫—Å—ã —Å–Ω–∏–∂–∞—é—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π `SELECT`, –Ω–æ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª—è—Ç—å `INSERT`, `UPDATE`, `DELETE`, —Ç–∞–∫ –∫–∞–∫ —Ç—Ä–µ–±—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

–°–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤.

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ MySQL

| –¢–∏–ø –∏–Ω–¥–µ–∫—Å–∞                         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|-------------------------------------|---------------------------------------------------------------------------|
| [`PRIMARY KEY`](#primary-key)       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π, –Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å `NULL`. –û–¥–∏–Ω –Ω–∞ —Ç–∞–±–ª–∏—Ü—É.                  |
| [`UNIQUE INDEX`](#unique-index)     | –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å—Ç–æ–ª–±—Ü–µ/—Å—Ç–æ–ª–±—Ü–∞—Ö.                   |
| [`INDEX` –∏–ª–∏ `KEY`](#index)         | –û–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –¥–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π.                       |
| [`FULLTEXT INDEX`](#fulltext-index) | –ò–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (—Ç–æ–ª—å–∫–æ `MyISAM`, `InnoDB` –Ω–∞—á–∏–Ω–∞—è —Å 5.6). |
| [`SPATIAL INDEX`](#spatial-index)   | –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã (`MyISAM` –∏ `InnoDB`), –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–º —Ç–∏–ø–∞–º. |
| [`FOREIGN KEY`](#foreign-key)       | –ù–µ –∏–Ω–¥–µ–∫—Å, –Ω–æ —Å–æ–∑–¥–∞—ë—Ç —Å–∫—Ä—ã—Ç—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á (–¥–ª—è —Å–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü). |


### PRIMARY KEY

–û–±—ã—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ id:
```
ALTER TABLE employees ADD PRIMARY KEY (employee_id);
```
–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —É–∂–µ –∏–º–µ–µ—Ç `PRIMARY KEY`, –≤—Ç–æ—Ä–æ–π –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–ª—å–∑—è.

### UNIQUE INDEX

–°–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–µ—Ç–∏–º –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ first_name + last_name –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞:
```
CREATE UNIQUE INDEX uniq_name_dept ON employees (first_name, last_name, department_id);
```
### INDEX

–£—Å–∫–æ—Ä—è–µ—Ç –ø–æ–∏—Å–∫, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É, `JOIN`.

- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –ø–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—é:
```
CREATE INDEX idx_dept_id ON employees(department_id);
```
- –¢–∞–∫ –∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º:
```
CREATE INDEX idx_dept_salary ON employees(department_id, salary);
```

### FULLTEXT INDEX

–î–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∏–º–µ–Ω–∏):
```
CREATE FULLTEXT INDEX ft_name ON employees(first_name, last_name);
```
–ü—Ä–∏–º–µ–Ω–∏–º —Ç–æ–ª—å–∫–æ –∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Å—Ç–æ–ª–±—Ü–∞–º –≤–µ—Ä—Å–∏–∏ MySQL >= 5.6.

### SPATIAL INDEX

–¢–æ–ª—å–∫–æ –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä SPATIAL INDEX(location) —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º `location`:
```
CREATE TABLE hr.employees (
    id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    location POINT NOT NULL,
    SPATIAL INDEX(location)
);

--  –ø—Ä–∏–º–µ—Ä –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏:

INSERT INTO hr.employees (first_name, last_name, location)
VALUES 
('Ivan', 'Ivanov', ST_GeomFromText('POINT(40.7128 -74.0060)')), -- –ù—å—é-–ô–æ—Ä–∫
('Maria', 'Petrova', ST_GeomFromText('POINT(34.0522 -118.2437)')); -- –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å
```


### FOREIGN KEY

–°–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
```
ALTER TABLE employees
ADD CONSTRAINT fk_dept FOREIGN KEY (department_id) REFERENCES departments(department_id);
```
## üîç –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º:

–ó–∞–ø—Ä–æ—Å:
```
SELECT first_name, last_name, department_id, salary FROM employees
WHERE department_id = 90 AND salary > 5000;
```
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∏–Ω–¥–µ–∫—Å:
```
CREATE INDEX idx_dept_salary ON employees(department_id, salary);
```
–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω: `department_id` –ø–µ—Ä–≤—ã–º, –∏–º–µ–Ω–Ω–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∏—â–µ—Ç—Å—è –ø–æ —Ç–æ—á–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.
(–ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Ç–æ—á–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω!)
–ü–†–û–í–ï–†–ò–¢–¨ –ù–ê EXPLAIN!!!
üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

    –ß–µ–º –±–æ–ª—å—à–µ –∏–Ω–¥–µ–∫—Å, —Ç–µ–º –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤—Å—Ç–∞–≤–∫–∞.

    –í—Å–µ–≥–¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ EXPLAIN.

    –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç –∏–Ω–¥–µ–∫—Å.
