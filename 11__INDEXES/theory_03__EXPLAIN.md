# EXPLAIN
`EXPLAIN` ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –≤ MySQL, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä—è–¥–∫–µ —á—Ç–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω–¥–µ–∫—Å–∞—Ö, –º–µ—Ç–æ–¥–∞—Ö –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –∏ –¥—Ä—É–≥–∏—Ö –¥–µ—Ç–∞–ª—è—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ EXPLAIN:

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü (JOIN).
- –û—Ü–µ–Ω–∏–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.
- –ü–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### 1. –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
–ó–∞–ø—Ä–æ—Å:
```
EXPLAIN SELECT * FROM big_table WHERE age = 30;
```

id | select_type  | table     | partitions    | type | possible_keys | key        | key_len | ref   | rows   | filtered | Extra          
---|--------------|-----------|---------------|------|---------------|------------|---------|-------|--------|----------|------------------
1  | SIMPLE       | big_table | NULL          | ref  | idx_age       | idx_age    | 5       | const | 272118 | 100.00   | Using index


#### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—è–º:
| –ü–æ–ª–µ           | –ó–Ω–∞—á–µ–Ω–∏–µ    | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                            |
|----------------|-------------|---------------------------------------------------------------------------------------------------------------------|
| id             | 1           | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞. –ï—Å–ª–∏ –±—ã –±—ã–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ UNION, –∑–¥–µ—Å—å –±—ã–ª–∏ –±—ã –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.                            |
| select\_type   | SIMPLE      | –ü—Ä–æ—Å—Ç–æ–π SELECT –±–µ–∑ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤.                                                                                     |
| table          | big\_table  | –ò–º—è —Ç–∞–±–ª–∏—Ü—ã, –∫ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø.                                                                          |
| partitions     | NULL        | –ü–∞—Ä—Ç–∏—Ü–∏–∏ - –≥–ª—É–±–æ–∫–∏–π (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π) –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–∑–±–∏–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞. –ó–¥–µ—Å—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. |
| type           | ref         | –•–æ—Ä–æ—à–∏–π —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞. MySQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å —Å —Ç–æ—á–Ω—ã–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, WHERE age = 30).                        |
| possible\_keys | idx\_age    | –í–æ–∑–º–æ–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ MySQL –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.                                                                |
| key            | idx\_age    | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å.                                                                                        |
| key\_len       | 5           | –î–ª–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π —á–∞—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è INT —ç—Ç–æ 4 –±–∞–π—Ç–∞ + 1 —Å–ª—É–∂–µ–±–Ω—ã–π –±–∞–π—Ç.                                 |
| ref            | const       | –ó–Ω–∞—á–µ–Ω–∏–µ, —Å –∫–æ—Ç–æ—Ä—ã–º —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, age = 30).                                                         |
| rows           | 272118      | –ü—Ä–∏–º–µ—Ä–Ω–æ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å. –≠—Ç–æ –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.                                  |
| filtered       | 100.00      | –û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç —Å—Ç—Ä–æ–∫, –ø—Ä–æ—à–µ–¥—à–∏—Ö —Ñ–∏–ª—å—Ç—Ä. 100% ‚Äî —Ö–æ—Ä–æ—à–æ.                                                           |
| Extra          | Using index | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å ‚Äî –≤—Å–µ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞, –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.              |


#### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

    type = ref –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É (—ç—Ç–æ –≥–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ, —á–µ–º ALL –∏–ª–∏ range –≤ —Ä—è–¥–µ —Å–ª—É—á–∞–µ–≤).

    key = idx_age –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å.

    ref = const –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, age = 30) –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ.

    rows = 272118 –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ MySQL –æ–∂–∏–¥–∞–µ—Ç –æ–∫–æ–ª–æ 272 —Ç—ã—Å—è—á —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π. –≠—Ç–æ –æ—Ü–µ–Ω–∫–∞, –∞ –Ω–µ —Ç–æ—á–Ω–æ–µ —á–∏—Å–ª–æ.

    Using index –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ SELECT –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω, –Ω–µ –∑–∞–≥–ª—è–¥—ã–≤–∞—è –≤ —Å–∞–º—É —Ç–∞–±–ª–∏—Ü—É ‚Äî –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∏–Ω–¥–µ–∫—Å–∞.

#### üîç –ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–æ key_len = 5:

–ï—Å–ª–∏ –ø–æ–ª–µ age ‚Äî —ç—Ç–æ INT (4 –±–∞–π—Ç–∞), —Ç–æ key_len = 4 + 1 (—Å–ª—É–∂–µ–±–Ω—ã–π –±–∞–π—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, NULL-–±–∞–π—Ç) = 5.

#### üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

–≠—Ç–æ—Ç –ø–ª–∞–Ω —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ:

    –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å;

    –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –≤—Å—è —Ç–∞–±–ª–∏—Ü–∞;

    –Ω–µ—Ç –ª–∏—à–Ω–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (filtered = 100%);

    –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞–ø—Ä—è–º—É—é (Using index);

    –¥–æ—Å—Ç—É–ø type = ref ‚Äî –±—ã—Å—Ç—Ä—ã–π.


### 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ `EXPLAIN` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å –∏–Ω–¥–µ–∫—Å–æ–º `idx_age` (—Ç–æ—á–Ω—ã–π –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫)
```
EXPLAIN SELECT * FROM big_table WHERE age = 30;
EXPLAIN SELECT * FROM big_table WHERE age > 30;
```

| id | select_type | table     | type  | key      | key_len | ref   | rows    | filtered | Extra                    | –£—Å–ª–æ–≤–∏–µ  |
| -- | ----------- | --------- | ----- | -------- | ------- | ----- | ------- | -------- | ------------------------ | -------- |
| 1  | SIMPLE      | big_table | ref   | idx_age  | 5       | const | 272118  | 100.00   | Using index              | age = 30 |
| 1  | SIMPLE      | big_table | range | idx_age  | 5       | NULL  | 4972162 | 100.00   | Using where; Using index | age > 30 |

#### –û–±—â–µ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ

    üîë –ò–Ω–¥–µ–∫—Å idx_age –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö.

    üìò type = ref ‚Äî —ç—Ç–æ —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (age = 30); –±—ã—Å—Ç—Ä–µ–µ, —Ç–∞–∫ –∫–∞–∫ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

    üìó type = range ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ª–æ–≤–∏—è—Ö –≤–∏–¥–∞ age > 30; —ç—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫, –æ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π.

    ‚è± rows ‚Äî –æ—Ü–µ–Ω–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ MySQL –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å:

        –¥–ª—è age = 30 ‚Äî –º–µ–Ω—å—à–µ (272K —Å—Ç—Ä–æ–∫),

        –¥–ª—è age > 30 ‚Äî –±–æ–ª—å—à–µ (–ø–æ—á—Ç–∏ 5 –º–ª–Ω —Å—Ç—Ä–æ–∫).

    üìÑ Extra = Using index ‚Äî –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —á—Ç–µ–Ω–∏–µ –∏–¥—ë—Ç –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (–ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å).

        –î–ª—è age > 30 –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è `Using where` ‚Äî MySQL –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏.

#### –í—ã–≤–æ–¥

    –û–±–∞ –∑–∞–ø—Ä–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–¥–µ–∫—Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

    –†–∞–≤–µ–Ω—Å—Ç–≤–æ (age = ?) –±—ã—Å—Ç—Ä–µ–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ—Å—Ç—É–ø –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π (ref).

    –î–∏–∞–ø–∞–∑–æ–Ω (age > ?) —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–æ –≤—Å—ë –µ—â—ë –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–¥–µ–∫—Å—É.