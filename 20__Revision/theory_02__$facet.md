#  `$facet` (читается как «фасет»)
Позволяет выполнять **несколько независимых подагрегаций** в одном этапе конвейера `aggregate`. Возвращает результат в виде объекта, где ключи соответствуют названиям "граней" (фасетов), а значения — массивам с результатами подагрегаций.


### Пример:
Коллекция `albums`. Нужно:
1. Посчитать количество альбомов каждого типа (`Album_type`).
2. Получить последние 5 альбомов.

#### Запрос:
```javascript
db.albums.aggregate([
  {
    $facet: {
      typeCount: [{ $sortByCount: "$Album_type" }],
      recentAlbums: [{ $sort: { releaseDate: -1 } }, { $limit: 5 }]
    }
  }
]);
```

#### Результат:
```json
{
  "typeCount": [
    { "_id": "Rock", "count": 50 },
    { "_id": "Pop", "count": 30 }
  ],
  "recentAlbums": [
    { "title": "Album A", "releaseDate": "2025-01-01" },
    { "title": "Album B", "releaseDate": "2024-12-31" },
    { "title": "Album C", "releaseDate": "2024-12-30" }
  ]
}
```


### Ключевые моменты:
1. **Результат каждой "грани" — массив.** Например, `"typeCount"` содержит массив объектов, а не отдельный объект.
2. **Удобство:** можно получать разные срезы данных за один запрос.
3. **Применение:** аналитика, комбинирование статистики, получение агрегированных данных разных типов.
