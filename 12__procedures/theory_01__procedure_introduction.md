–í MySQL –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (–∏–ª–∏ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã) ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä SQL-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω—ã –ø–æ –∏–º–µ–Ω–∏. 

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ (–∏–ª–∏ –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞)** ‚Äî —ç—Ç–æ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ (CREATE PROCEDURE).
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ë–î, –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π –æ–±—ä–µ–∫—Ç.
- –ü—Ä–∏ CALL –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, —Ç.–∫. –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ "–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞" –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –∏ —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                     | –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ (PROCEDURE)                    | –§—É–Ω–∫—Ü–∏—è (FUNCTION)                      |
|------------------------------------|------------------------------------------|-----------------------------------------|
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**                     | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π                      | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è           |
| **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**            | –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤—É–µ—Ç—Å—è `OUT` –∏/–∏–ª–∏ `INOUT`) | ‚úÖ –î–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `RETURN`)             |
| **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫**                 | `CALL –∏–º—è(...)`                          | `SELECT –∏–º—è(...)`                       |
| **–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ SELECT**    | ‚ùå –ù–µ—Ç                                    | ‚úÖ –î–∞                                    |
| **–¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**                | `IN`, `OUT`, `INOUT`                     | –¢–æ–ª—å–∫–æ `IN`                             |
| **–ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î**     | ‚úÖ –î–∞ (`INSERT`, `UPDATE`, `DELETE`)      | ‚ùå –ù–µ—Ç (–∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã)             |
| **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**               | –í SQL-—Å–∫—Ä–∏–ø—Ç–∞—Ö, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö              | –í –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö, SELECT, WHERE, ORDER BY   |
| **–û–±—è–∑–∞—Ç–µ–ª–µ–Ω –ª–∏ RETURN**           | ‚ùå –ù–µ—Ç                                    | ‚úÖ –î–∞                                    |
| **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DML?**     | ‚úÖ –î–∞                                     | ‚ùå –ù–µ—Ç (–≤ MySQL - –Ω–µ—Ç)                   |
| **–°—Ñ–µ—Ä–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**               | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞    | –í—ã—á–∏—Å–ª–µ–Ω–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö       |
| **–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è**                   | –í –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`mysql.proc`)  | –í –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`mysql.proc`) |
| **–≠–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ mysqldump**        | –ù—É–∂–Ω–æ —Ñ–ª–∞–≥ `--routines`                  | –ù—É–∂–Ω–æ —Ñ–ª–∞–≥ `--routines`                 |
| **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ**| ‚úÖ –î–∞                                     | ‚úÖ –î–∞ (–Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)               |


## –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

*–°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:
```
DELIMITER //

CREATE PROCEDURE GetAllEmployees()
BEGIN
    SELECT first_name, last_name FROM employees;
END //

DELIMITER ;
```
–í—ã–∑–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã:
```
CALL GetAllEmployees();
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ PROCEDURE –∏ VIEW

| –ö—Ä–∏—Ç–µ—Ä–∏–π                                            | `PROCEDURE GetAllEmployees()`             | `VIEW all_employees`                        |
|-----------------------------------------------------|-------------------------------------------|---------------------------------------------|
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**                                      | –í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è                        | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ                         |
| **–ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞–∫**                              | `CALL GetAllEmployees()`                  | `SELECT * FROM all_employees`               |
| **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**                                      | –†–µ–∑—É–ª—å—Ç–∞—Ç SELECT                          | –†–µ–∑—É–ª—å—Ç–∞—Ç SELECT                            |
| **–ú–æ–∂–Ω–æ –ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å?**                           | ‚ùå –ù–µ—Ç (`WHERE` –Ω–µ–ª—å–∑—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ `CALL`) | ‚úÖ –î–∞ (`WHERE`, `ORDER BY`, `LIMIT` –∏ —Ç.–¥.)  |
| **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ JOIN?**                   | ‚ùå –ù–µ—Ç                                     | ‚úÖ –î–∞                                        |
| **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å SQL-–∑–∞–ø—Ä–æ—Å–∞?**    | ‚ùå –ù–µ—Ç ‚Äî `CALL` –Ω–µ–ª—å–∑—è –≤—Å—Ç—Ä–æ–∏—Ç—å –≤ `SELECT` | ‚úÖ –î–∞ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Ç–∞–±–ª–∏—Ü—É       |
| **–ì–∏–±–∫–æ—Å—Ç—å**                                        | ‚úÖ –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, IF, —Ü–∏–∫–ª—ã    | ‚ùå –¢–æ–ª—å–∫–æ SELECT-–∑–∞–ø—Ä–æ—Å                      |
| **–ò–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ?** (`INSERT`, `UPDATE`, `DELETE`) | ‚úÖ –ú–æ–∂–µ—Ç (–≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö)       | ‚ùå –ù–µ—Ç                                       |
| **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**                                     | ‚ùå –ù–µ—Ç (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å)  | ‚úÖ –î–∞ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å SQL-–∑–∞–ø—Ä–æ—Å–∞) |



## –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### 1. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º IN

–ü–∞—Ä–∞–º–µ—Ç—Ä IN ‚Äî –≤—Ö–æ–¥–Ω–æ–π, –µ–≥–æ –ø–µ—Ä–µ–¥–∞—é—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ.
```
DELIMITER //

CREATE PROCEDURE GetEmployeesByDepartment(IN dept_id INT)
BEGIN
    SELECT first_name, last_name
    FROM employees
    WHERE department_id = dept_id;
END //

DELIMITER ;
```
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```
CALL GetEmployeesByDepartment(3);
```

### 2. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º OUT

*–ü–∞—Ä–∞–º–µ—Ç—Ä OUT ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π, –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø–∏—à–µ—Ç –≤ –Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞.*
```
DELIMITER //

CREATE PROCEDURE CountEmployeesByDepartment(IN dept_id INT, OUT emp_count INT)
BEGIN
    SELECT COUNT(*) INTO emp_count
    FROM employees
    WHERE department_id = dept_id;
END //

DELIMITER ;
```
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```
CALL CountEmployeesByDepartment(3, @count);
SELECT @count;
```
–ü–†–ò–ú–ï–ß–ê–ù–ò–ï:
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `@count` ‚Äî —ç—Ç–æ `user-defined session variable` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–µ—Å—Å–∏–æ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
–°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.

–ï—ë  –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏ –∑–∞—Ä–∞–Ω–µ–µ (–Ω–æ –¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
```
SET  @count = 0;
CALL CountEmployeesByDepartment(3, @count);
SELECT @count;
```

### 3. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º INOUT

*–ü–∞—Ä–∞–º–µ—Ç—Ä INOUT ‚Äî –∏ –≤—Ö–æ–¥–Ω–æ–π, –∏ –≤—ã—Ö–æ–¥–Ω–æ–π, –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä—É –∏ –ø–æ–ª—É—á–∞—Ç—å –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–µ –æ–±—Ä–∞—Ç–Ω–æ.*

```
DELIMITER //

CREATE PROCEDURE IncreaseSalaryByPercent(INOUT percent_increase DECIMAL(5,2))
BEGIN
    UPDATE employees
    SET salary = salary * (1 + percent_increase / 100) LIMIT 300;

    -- –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ (—É–º–Ω–æ–∂–∏–º –Ω–∞ 2 –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
    SET percent_increase = percent_increase * 2;
END //

DELIMITER ;
```
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```
SET @pct = 5.0;
CALL IncreaseSalaryByPercent(@pct);
SELECT @pct;  -- —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç 10.0
```

### –ü—Ä–æ—Ü–µ–¥—É—Ä–∞, —Å–æ–∑–¥–∞—é—â–∞—è –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
```
DELIMITER //

CREATE PROCEDURE get_employee_salaries(IN emp_id INT)
BEGIN
    -- –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É, –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å
    DROP TEMPORARY TABLE IF EXISTS temp_salaries;

    -- –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∏ –Ω–∞–ø–æ–ª–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    CREATE TEMPORARY TABLE temp_salaries AS
    SELECT employee_id, salary
    FROM employees
    WHERE employee_id > emp_id;
END //

DELIMITER ;
```

–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –µ—ë –≤—ã–∑–æ–≤:
```
CALL get_employee_salaries(100);
SELECT * FROM temp_salaries;
```

–í–ê–ñ–ù–û: –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏!

## üìÑ –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
```
DROP PROCEDURE IF EXISTS GetAllCities;
```

## –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ë–î

```
SELECT 
    ROUTINE_NAME, ROUTINE_TYPE
FROM 
    INFORMATION_SCHEMA.ROUTINES
WHERE ROUTINE_SCHEMA = 'database_name';
```

## –£–∑–Ω–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ—É–Ω–∫—Ü–∏–∏/–ø—Ä–æ—Ü–µ–¥—É—Ä—ã

```
SHOW CREATE FUNCTION function_name;
SHOW CREATE PROCEDURE procedure_name;
```
