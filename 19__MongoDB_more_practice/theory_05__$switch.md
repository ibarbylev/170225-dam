
`$switch` ‚Äî —ç—Ç–æ **—É—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä** –≤ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–∞—Ö MongoDB,  
–∞–Ω–∞–ª–æ–≥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `CASE` –≤ SQL
```sql
SELECT 
  name,
  CASE
    WHEN score >= 90 THEN 'A'
    WHEN score >= 75 THEN 'B'
    ELSE 'C'
  END AS grade
FROM students;
```

–ò–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `match-case` –≤ Python 3.10+
```pathon
value = 3

match value:
    case 1:
        print("–û–¥–∏–Ω")
    case 2:
        print("–î–≤–∞")
    case _:
        print("–ß—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ")
```
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏–π**, –∏ –≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –ø–µ—Ä–≤–æ–º—É –∏–∑ –Ω–∏—Ö, 
–∫–æ—Ç–æ—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è.

---

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```javascript
{
  $switch: {
    branches: [
      { case: <—É—Å–ª–æ–≤–∏–µ>, then: <–∑–Ω–∞—á–µ–Ω–∏–µ> },
      { case: <—É—Å–ª–æ–≤–∏–µ>, then: <–∑–Ω–∞—á–µ–Ω–∏–µ> },
      ...
    ],
    default: <–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é>
  }
}
```

* `branches`: –º–∞—Å—Å–∏–≤ —É—Å–ª–æ–≤–∏–π –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
* `case`: –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–µ `true` –∏–ª–∏ `false`.
* `then`: —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –ø—Ä–∏ `true`.
* `default`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ –∏–∑ —É—Å–ª–æ–≤–∏–π –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä

```js
db.students.aggregate([
  {
    $project: {
      name: 1,
      gradeCategory: {
        $switch: {
          branches: [
            { case: { $gte: ["$score", 90] }, then: "–û—Ç–ª–∏—á–Ω–æ" },
            { case: { $gte: ["$score", 75] }, then: "–•–æ—Ä–æ—à–æ" },
            { case: { $gte: ["$score", 60] }, then: "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ" }
          ],
          default: "–ù–µ—É–¥"
        }
      }
    }
  }
])
```

üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

* –ï—Å–ª–∏ `score ‚â• 90` ‚Üí "–û—Ç–ª–∏—á–Ω–æ"
* –ï—Å–ª–∏ `score ‚â• 75` ‚Üí "–•–æ—Ä–æ—à–æ"
* –ï—Å–ª–∏ `score ‚â• 60` ‚Üí "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ"
* –ò–Ω–∞—á–µ ‚Üí "–ù–µ—É–¥"

‚ö†Ô∏è –í–∞–∂–Ω–æ: **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥—ë—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑**, –∏ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è ‚Äî –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

---
## –ü—Ä–∏–º–µ—Ä "—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö"
```javascript
db.getCollection('listingsAndReviews').aggregate(
  [
    {
      $project: {
        _id: {
          $switch: {
            branches: [
              { case: { $lt: ['$_id', 50] },  then: '< 50' },
              { case: { $lt: ['$_id', 100] }, then: '< 100' },
              { case: { $lt: ['$_id', 1000] }, then: '< 1000' }
            ],
            default: '‚â• 1000'
          }
        }
      }
    }
  ]
);
```

---

## üìå –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$switch`

| –°—Ü–µ–Ω–∞—Ä–∏–π                                                          | –û–ø–µ—Ä–∞—Ç–æ—Ä    |
| ----------------------------------------------------------------- | ----------- |
| –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `–µ—Å–ª–∏ ‚Äî —Ç–æ ‚Äî –∏–Ω–∞—á–µ`                              | `$cond`     |
| –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ `if / else if / else`                          | ‚úÖ `$switch` |
| –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–µ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π (–∞–Ω–∞–ª–æ–≥ `switch-case`) | ‚úÖ `$switch` |

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã—Ö —Å—Ç–∞–¥–∏–π** (`$project`, `$addFields`, `$group`, –∏ —Ç.–¥.).
* –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `update`-–æ–ø–µ—Ä–∞—Ü–∏—è—Ö ‚Äî —Ç–∞–º —Ç–æ–ª—å–∫–æ `$cond`.

